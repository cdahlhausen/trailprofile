# Charlottesville Area Trail Profiles

This repo has data and R code for plotting the elevation and distance profiles of some of my favorite trail runs around Charlottesville. If you want to add any to this list, please [email me](http://stephenturner.us/email.html) with the stats, or preferably submit a pull request.

This README was compiled using [knitr](http://yihui.name/knitr/). See the Makefile for details.

## Code

This R code reads in the [data](./trailprofile.csv), computes the *Pain 'n Gain* score as the elevation changed normalized by distance (the higher the number, the more net elevation change per mile on average), and creates the plot further below.

```{r, datain}
library(ggplot2)

trailprofile <- read.csv("trailprofile.csv", header=TRUE, stringsAsFactors=FALSE)
trailprofile <- transform(trailprofile, PainNGain=Elevation/Distance)

p <- ggplot(data=trailprofile, aes(Distance, Elevation, label=Route)) + 
    geom_point(aes(colour=PainNGain, size=PainNGain)) + 
    scale_size(range=c(3,25)) + 
    scale_colour_continuous(low="blue4", high="red2")
p <- p+geom_text(size=5, angle=51, vjust=2, hjust=.1, colour="gray20")
p <- p + scale_x_continuous(limits=c(8, 23))
p <- p + scale_y_continuous(limits=c(700,5200))
p <- p + labs(title="Charlottesville Area Trail Profiles")
```

```{r, debugging, echo=F, eval=F}
# A place to debug without showing up in output file.
str(trailprofile)
p
```

## Data

The file [trailprofile.csv](./trailprofile.csv) has the raw data (route name, link, elevation, distance). The "Pain 'n Gain" score is the elevation changed normalized by distance - the higher the number, the more net elevation change per mile on average.

```{r createtable, results='asis', echo=FALSE}
cat("Route | Link | Elevation | Distance | PainNGain", "--- | --- | --- | --- | ---", sep="\n")
cat(apply(trailprofile, 1, function(X) paste(X, collapse=" | ")), sep = "\n")
```

## Figure

The plot shows the elevation change vs. total mileage, with the size and color of the point increasing and becomming redder as the run becomes harder (more elevation change per mile).

```{r, scatterplot, fig.width=11, fig.height=11, echo=FALSE}
print(p)
```

